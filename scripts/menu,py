#!/usr/bin/env python3
# menu.py
# Author: Luxforge
# Interactive CLI menu for network management

import sys

# Load the other classes and functions
from network_manager import NetworkManager


def batch_create_networks():
    # Batch create networks based on .env files
    manager = NetworkManager()
    manager.batch_create()

def preview_envs():
    # Scan and preview .env configurations
    manager = NetworkManager()
    env_files = manager.scan_env_files()
    if not env_files:
        print("[INFO] No .env files found.")
        return
    for env_file in env_files:
        print(f"\n--- {env_file} ---")
        config = manager.load_env(env_file)
        for key, value in config.items():
            print(f"{key} = {value}")

def show_menu():
    # Simple CLI menu loop
    while True:
        # Clear screen
        os.system('clear' if os.name == 'posix' else 'cls')
        
        # Generate menu
        print("========================")
        print("LuxForge Network Manager")
        print("========================")
        print("1. Batch create VLAN networks")
        print("2. Scan and preview .env configurations")
        print("3. Exit")
        choice = input("\nSelect an option: ").strip()

        if choice == "1":
            batch_create_networks()
        elif choice == "2":
            preview_envs()
        elif choice == "3":
            print("Exiting LuxForge Network Manager.")
            sys.exit(0)
        else:
            print("[WARN] Invalid selection. Please choose 1, 2, or 3.")

if __name__ == "__main__":
    show_menu()